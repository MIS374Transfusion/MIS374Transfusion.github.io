<!-- page to allow user to input patient's weight for platelets ordering -->



<!DOCTYPE html>
<html>

<head>
		<meta charset="utf-8">
		<!-- sets the width of page to follow hte screen-width of device -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Platelets Ordering</title>
		<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
 		<link rel="stylesheet" href="../bootstrap-4.3.1-dist/css/bootstrap.css"> 


</head>
<body>

		<!-- Navigation bar -->
		<nav class="navbar navbar-expand-sm bg-light justify-content-between">
      <ul class ="navbar-nav">
        <li class="nav-item">
					<a class="nav-link" style="color:#1a4197" href="../index.html">Home</a>
        </li>
      </ul>
      
      <div>
        <img src="../dcmcLogo.png" class="display-inblock float-right" width="64" height="32" alt="">
      </div>
    </nav>


  <div class = "m-4">
    <h4 align = 'center'>Please enter the weight of the patient</h4>
  </div>




<!-- form for weight input, when user press submit, will call plateletcalculate function and go to plateletcondition.html -->

  <form action = "plateletcondition.html" onsubmit = "plateletcalculate()" align = 'center'>
  <div class="col-sm-3 my-1 m-2">
      <label class="sr-only" for="plateletWeight" >plateletWeight</label>
      <div class="input-group m-2">
          <span class="input-group-text">Weight:</span>
      </div>
      <div class="row input-group m-2">
          <input type="number" step = ".01" class="form-control-lg" min="1" id="plateletWeight" placeholder="Patient Weight" required >
          <span class="input-group-text">kg</span>
        </div>
  </div>


  <a href='../orderingchoices.html'><button type="button" class="btn-lg btn-primary">Back</button></a>
  <button type="submit" class="btn-lg btn-primary">Next</button>

</form>





<!-- javascript to calculate the recommendation volume based on the input weight -->
<script>
	function plateletcalculate()
	{
  var weight = document.getElementById("plateletWeight").value; //storing the weight from the form as a javascript variable
  window.sessionStorage.setItem("plateletWeight", weight) //set the weight as a sessionstorage variable to use later on
  var minRec = 0;
  var maxRec = 0;
  var minRange = 10;
  var maxRange = 15;
  var recommendation = "";

  if (weight <20) {
  	minRec = Math.round(weight * minRange);
  	maxRec = Math.round(weight * maxRange);
  	recommendation = minRec + "ml - " + maxRec +"ml";
	}

  if (weight >= 20){
  	recommendation = "1 pheresis unit";
  }



  window.sessionStorage.setItem("plateletrecommendation", recommendation); //set the recommendation as a sessionstorage for later use


	}

</script>

</body>
</html>

