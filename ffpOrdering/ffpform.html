<!DOCTYPE html>
<html>

<!-- This is the header with the link to the bootstrap library in order to style the page -->
<head>
		<meta charset="utf-8">
		<!-- sets the width of page to follow hte screen-width of device -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Fresh Frozen Plasma Ordering</title>
		<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
<!-- 		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
 -->
 		<link rel="stylesheet" href="../bootstrap-4.3.1-dist/css/bootstrap.css"> 
</head>
<body>

<!-- This is the navigation bar -->
  <nav class="navbar navbar-expand-sm bg-light">
    <ul class ="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" style="color:#1a4197" href="../index.html">Home</a>
      </li>
    </ul>
  </nav>


<!-- This is the form for the user to input the weight of the patient -->
  <div class = "m-4">
    <h4 align = 'center'>Please enter the weight of the patient</h4>
  </div>

<!-- This line points to the javascript calculation function ffpcalculate() seen at the bottom of this page -->
  <form action = "ffpcondition.html" onsubmit = "ffpcalculate()" align = 'center'>

<!-- This is the formatting for the form -->
  <div class="col-sm-3 my-1 m-2">
      <label class="sr-only" for="ffpWeight" >ffpWeight</label>
      <div class="input-group m-2">
          <span class="input-group-text">Weight:</span>
      </div>
      <div class="row input-group m-2">
          <input type="number" step = ".01" class="form-control-lg" min="1" id="ffpWeight" placeholder="Patient's Weight" required >
      </div>
      <div class="input-group m-2">
          <span class="input-group-text">kg</span> 
      </div>
  </div>

<!-- These are the back and next buttons for the page -->
  <a href='../orderingchoices.html'><button type="button" class="btn-lg btn-primary">Back</button></a>
  <a href="ffpcondition.html"><button type="submit" class="btn-lg btn-primary">Next</button>

</form>

<!-- This is the javascript function to calculate the appropriate transfusion amount -->
<script>
	function ffpcalculate()
	{
  var weight = document.getElementById("ffpWeight").value;
  var minRec = 0;
  var maxRec = 0;
  var minRange = 10;
  var maxRange = 20;
  var recommendation = "he";


  if (weight <20) {
  	minRec = Math.round(weight * minRange);
  	maxRec = Math.round(weight * maxRange);
  	recommendation = minRec + "ml - " + maxRec +"ml";
	}

  if (weight >= 20 && weight <=30){
  	recommendation = "1 unit";
  }

  if (weight > 30){
    recommendation = "2 units; Transfuse 2 units and reassess coagulation; Note: Median FFP unit volume 300 mls (range 200-350)";
  }

  window.sessionStorage.setItem("ffpWeight", weight)  
  window.sessionStorage.setItem("ffprecommendation", recommendation);
	}


</script>

</body>
</html>

